(function(){"use strict";var e={368:function(e,a,t){e.exports=t.p+"img/product-features.ba52dab1.svg"},1291:function(e,a,t){e.exports=t.p+"img/ai-innovation.a12547ec.svg"},4039:function(e,a,t){e.exports=t.p+"img/achievements.16ab3ee0.svg"},4524:function(e,a,t){var l=t(5130),s=t(6768);const o={id:"app"};function n(e,a){const t=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(t)])}var r=t(1241);const i={},c=(0,r.A)(i,[["render",n],["__scopeId","data-v-33e5f349"]]);var u=c,d=t(1387),p=t(4232),v=t(144),k=t(1219);const m={class:"activation-modal"},h={class:"modal-header"},g={class:"modal-body"},f={class:"horizontal-layout"},b={class:"qr-section"},y={class:"qr-container"},w={class:"qr-wrapper"},L={class:"qr-placeholder"},_={class:"qr-pattern"},C={class:"qr-info"},x={class:"activation-section"},F={class:"activation-form"},R={class:"activation-input"},T=["disabled"];var E={__name:"UpgradeModal",props:{show:{type:Boolean,default:!1},accountLevel:{type:String,default:"free"}},emits:["close","confirm","activation","after-close"],setup(e,{emit:a}){const t=a,o=(0,v.KR)(""),n=(0,v.KR)(""),r=()=>Math.floor(1e7+9e7*Math.random()).toString(),i=(0,s.EW)(()=>n.value?n.value:r());(0,s.sV)(()=>{n.value||(n.value=r())});const c=async()=>{if(console.log("收到点击"),o.value.trim()&&o.value.length>=7&&o.value.length<=8){let a=o.value.trim().toUpperCase();a=a.padStart(16,"0");try{const e=await fetch("/api/verify-activation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({randomCode:n.value,activationCode:a})}),l=await e.json();l.success?(t("activation",{success:!0,version:l.version,expiryDate:l.expiryDate}),o.value=""):k.nk.error(l.error||"激活码验证失败，请检查激活码是否正确")}catch(e){console.error("激活码验证请求失败:",e),k.nk.error("激活码验证请求失败，请稍后重试")}}else k.nk.error("激活码长度不正确，请输入7-8位激活码")},u=e=>{let a=e.target.value.replace(/[^A-Za-z0-9]/g,"").toUpperCase();o.value=a},d=e=>{const a=["#3b82f6","#1d4ed8","#60a5fa","#93c5fd"],t=a[Math.floor(Math.random()*a.length)],l=4*Math.random()+2,s=.5*Math.random()+.3;return{backgroundColor:t,width:`${l}px`,height:`${l}px`,opacity:s,animationDelay:.1*e+"s"}};return(a,t)=>((0,s.uX)(),(0,s.Wv)(l.eB,{name:"modal",onAfterLeave:t[3]||(t[3]=e=>a.$emit("after-close"))},{default:(0,s.k6)(()=>[e.show?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:t[2]||(t[2]=(0,l.D$)(e=>a.$emit("close"),["self"]))},[(0,s.Lk)("div",m,[(0,s.Lk)("div",h,[t[5]||(t[5]=(0,s.Lk)("div",{class:"header-content"},[(0,s.Lk)("div",{class:"icon-wrapper"},[(0,s.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s.Lk)("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,s.Lk)("path",{d:"M2 17L12 22L22 17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,s.Lk)("path",{d:"M2 12L12 17L22 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])]),(0,s.Lk)("div",{class:"header-text"},[(0,s.Lk)("h3",null,"激活码兑换"),(0,s.Lk)("p",{class:"header-subtitle"},"输入激活码，解锁专属服务")])],-1)),(0,s.Lk)("button",{class:"close-btn",onClick:t[0]||(t[0]=e=>a.$emit("close"))},[...t[4]||(t[4]=[(0,s.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s.Lk)("path",{d:"M12 4L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,s.Lk)("path",{d:"M4 4L12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),(0,s.Lk)("div",g,[(0,s.Lk)("div",f,[(0,s.Lk)("div",b,[(0,s.Lk)("div",y,[(0,s.Lk)("div",w,[(0,s.Lk)("div",L,[(0,s.Lk)("div",_,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(64,e=>(0,s.Lk)("div",{class:"qr-dot",key:e,style:(0,p.Tr)(d(e))},null,4)),64))]),t[6]||(t[6]=(0,s.Lk)("div",{class:"qr-logo"},[(0,s.Lk)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s.Lk)("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,s.Lk)("path",{d:"M2 17L12 22L22 17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,s.Lk)("path",{d:"M2 12L12 17L22 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))])])]),(0,s.Lk)("div",C,[(0,s.Lk)("h3",null,(0,p.v_)(i.value),1),t[7]||(t[7]=(0,s.Lk)("p",null,"扫描上方二维码，访问官方网站获取专属激活码",-1)),t[8]||(t[8]=(0,s.Lk)("div",{class:"qr-steps"},[(0,s.Lk)("div",{class:"step-item"},[(0,s.Lk)("div",{class:"step-number"},"1"),(0,s.Lk)("span",null,"扫描二维码")]),(0,s.Lk)("div",{class:"step-arrow"},[(0,s.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s.Lk)("path",{d:"M6 2L10 6L6 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])]),(0,s.Lk)("div",{class:"step-item"},[(0,s.Lk)("div",{class:"step-number"},"2"),(0,s.Lk)("span",null,"获取激活码")]),(0,s.Lk)("div",{class:"step-arrow"},[(0,s.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s.Lk)("path",{d:"M6 2L10 6L6 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])]),(0,s.Lk)("div",{class:"step-item"},[(0,s.Lk)("div",{class:"step-number"},"3"),(0,s.Lk)("span",null,"输入激活码")])],-1))])]),(0,s.Lk)("div",x,[(0,s.Lk)("div",F,[t[10]||(t[10]=(0,s.Lk)("div",{class:"activation-header"},[(0,s.Lk)("h4",null,"输入激活码"),(0,s.Lk)("p",null,"已有激活码？输入后立即享受专属服务")],-1)),(0,s.Lk)("div",R,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e),placeholder:"请输入激活码",class:"activation-field",maxlength:"8",onInput:u,onKeyup:(0,l.jR)(c,["enter"])},null,544),[[l.Jo,o.value]]),(0,s.Lk)("button",{class:"activation-btn",onClick:c,disabled:!o.value||o.value.length<7||o.value.length>8},[...t[9]||(t[9]=[(0,s.Lk)("span",null,"立即兑换",-1)])],8,T)]),t[11]||(t[11]=(0,s.Lk)("div",{class:"activation-features"},[(0,s.Lk)("div",{class:"feature-item"},[(0,s.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s.Lk)("path",{d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Z",stroke:"currentColor","stroke-width":"1.5"}),(0,s.Lk)("path",{d:"M8 11V8",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}),(0,s.Lk)("path",{d:"M8 5H8.01",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})]),(0,s.Lk)("span",null,"稳定·安全·放心")]),(0,s.Lk)("div",{class:"feature-item"},[(0,s.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s.Lk)("path",{d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Z",stroke:"currentColor","stroke-width":"1.5"}),(0,s.Lk)("path",{d:"M10.5 8H5.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})]),(0,s.Lk)("span",null,"24小时技术支持")]),(0,s.Lk)("div",{class:"feature-item"},[(0,s.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s.Lk)("path",{d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Z",stroke:"currentColor","stroke-width":"1.5"}),(0,s.Lk)("path",{d:"M10.5 5.5L5.5 10.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}),(0,s.Lk)("path",{d:"M10.5 10.5L5.5 5.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})]),(0,s.Lk)("span",null,"银行级加密保障")])],-1))])])])]),t[12]||(t[12]=(0,s.Lk)("div",{class:"modal-footer"},[(0,s.Lk)("div",{class:"security-notice"},[(0,s.Lk)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s.Lk)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),(0,s.Lk)("span",null,"所有信息均经过加密处理，保障您的账户安全")])],-1))])])):(0,s.Q3)("",!0)]),_:1}))}};const I=(0,r.A)(E,[["__scopeId","data-v-11192e54"]]);var $=I;const S={class:"app-layout"},j={class:"sidebar"},A={class:"top-section"},V={class:"user-info"},D={class:"avatar"},M={class:"unlogin"},K={class:"menu"},O={class:"sidebar-footer"},W={class:"dev-info"},U={class:"progress-bar"},P={class:"main-content"};var X={__name:"AppLayout",setup(e){const a=(0,v.KR)("未登录"),t=(0,v.KR)("未"),l=(0,d.lq)(),o=(0,v.KR)(l.path),n=(0,v.KR)(null),r=(0,v.KR)({used_today:0,daily_limit:100,remaining:100,account_level:"free",is_unlimited:!1}),i=(0,v.KR)(null),c=(0,v.KR)(!1),u=(0,s.EW)(()=>{const e=r.value.account_level;return console.log(e),"free"===e?"升级基础版":"basic"===e?"升级企业版":"获取帮助"}),m=()=>{const e=r.value.account_level;"free"===e||"basic"===e?c.value=!0:window.open("https://qm.qq.com/q/EYFzhIHdhC","_blank")},h=()=>{k.nk.warning("支付功能即将上线，请稍后再试"),c.value=!1},g=async()=>{const e=3,l=1e3;for(let o=1;o<=e;o++)try{const e=await fetch("http://localhost:5000/api/wechat-status");if(!e.ok)throw new Error(`HTTP错误: ${e.status}`);const l=await e.json();return l.success&&l.online?(a.value=l.username||"微信在线",void(t.value=l.username?l.username.charAt(0):"微")):(a.value=l.online?l.username||"微信在线":"未登录",void(t.value=l.online?l.username?l.username.charAt(0):"微":"未"))}catch(s){console.error(`检查微信状态失败 (尝试 ${o}/${e}):`,s),o===e?(a.value="连接异常",t.value="异"):await new Promise(e=>setTimeout(e,l*o))}},f=async()=>{try{const e=await fetch("http://localhost:5000/api/message-quota");if(!e.ok)throw new Error(`HTTP错误: ${e.status}`);const a=await e.json();a.success&&(r.value=a.quota)}catch(e){console.error("获取消息配额失败:",e)}};return(0,s.sV)(()=>{g(),f(),n.value=setInterval(g,3e5),i.value=setInterval(f,1e4)}),(0,s.hi)(()=>{n.value&&clearInterval(n.value),i.value&&clearInterval(i.value)}),(0,d.V6)(e=>{o.value=e.path}),(e,l)=>{const n=(0,s.g2)("router-link"),i=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",S,[(0,s.Lk)("aside",j,[(0,s.Lk)("div",A,[(0,s.Lk)("div",V,[(0,s.Lk)("div",D,(0,p.v_)(t.value),1),(0,s.Lk)("span",M,(0,p.v_)(a.value),1)]),(0,s.Lk)("nav",K,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",{class:(0,p.C4)(["menu-item",{active:"/"===o.value}])},[(0,s.bF)(n,{to:"/"},{default:(0,s.k6)(()=>[...l[1]||(l[1]=[(0,s.eW)("首页",-1)])]),_:1})],2),(0,s.Lk)("li",{class:(0,p.C4)(["menu-item",{active:"/auto_info"===o.value}])},[(0,s.bF)(n,{to:"/auto_info"},{default:(0,s.k6)(()=>[...l[2]||(l[2]=[(0,s.eW)("自动信息",-1)])]),_:1})],2),(0,s.Lk)("li",{class:(0,p.C4)(["menu-item",{active:"/ai_takeover"===o.value}])},[(0,s.bF)(n,{to:"/ai_takeover"},{default:(0,s.k6)(()=>[...l[3]||(l[3]=[(0,s.eW)("AI 运营",-1)])]),_:1})],2),(0,s.Lk)("li",{class:(0,p.C4)(["menu-item",{active:"/other_box"===o.value}])},[(0,s.bF)(n,{to:"/other_box"},{default:(0,s.k6)(()=>[...l[4]||(l[4]=[(0,s.eW)("数据导出",-1)])]),_:1})],2)])])]),(0,s.Lk)("div",O,[(0,s.Lk)("div",W,"已发信息 "+(0,p.v_)(r.value.used_today)+" / "+(0,p.v_)(r.value.is_unlimited?"∞":r.value.daily_limit),1),(0,s.Lk)("div",U,[(0,s.Lk)("div",{class:"progress-fill",style:(0,p.Tr)({width:r.value.is_unlimited?"100%":r.value.used_today/r.value.daily_limit*100+"%"})},null,4)]),(0,s.Lk)("button",{class:"upgrade-btn",onClick:m},(0,p.v_)(u.value),1)])]),(0,s.Lk)("main",P,[(0,s.bF)(i)]),(0,s.bF)($,{show:c.value,"account-level":r.value.account_level,onClose:l[0]||(l[0]=e=>c.value=!1),onConfirm:h},null,8,["show","account-level"])])}}};const q=(0,r.A)(X,[["__scopeId","data-v-cb0ea5c0"]]);var N=q;const B={class:"home-container"},z={key:0,class:"pricing"},Y={class:"pricing-cards"},H={key:0,class:"popular-tag"},Q={class:"card-header"},J={class:"price"},Z={class:"amount"},G={class:"period"},ee={class:"card-features"},ae=["onClick"],te={key:1,class:"promotion-carousel"},le={class:"carousel-container"},se={class:"slide-content"},oe={class:"slide-image"},ne=["src","alt"],re={class:"slide-info"},ie={class:"carousel-indicators"},ce=["onClick"],ue={class:"key-metrics"},de={class:"metrics-container"},pe=["data-target"],ve={class:"metric-label"},ke={class:"dashboard"},me={class:"dashboard-cards"},he={class:"card-title"},ge={class:"card-footer"},fe={class:"testimonials"},be={class:"testimonial-cards"},ye={class:"quote"},we={class:"customer-info"},Le=["src"],_e={class:"customer-details"},Ce={class:"name"},xe={class:"company"};var Fe={__name:"HomeView",setup(e){const a=(0,v.KR)(!1),l=(0,v.KR)(!1),o=(0,v.KR)(!1),n=(0,v.KR)(0),r=(0,v.KR)([{title:"产品核心功能",description:"我们的自动化工具能够帮您处理日常工作中的重复性任务，从数据收集到分析再到执行，一站式解决您的需求。不需要复杂的设置，简单几步就能让系统开始为您工作，让您有更多时间专注于更重要的事情。",image:t(368)},{title:"AI技术创新",description:"我们不只是简单地自动化，而是通过智能学习不断优化工作流程。系统会根据您的使用习惯和反馈，自动调整执行策略，越用越聪明。这种自适应技术让我们的工具在同类产品中脱颖而出。",image:t(1291)},{title:"成功战绩",description:"目前已有超过5000家企业选择我们的服务，每月处理的任务量突破100万次。客户反馈显示，使用我们的工具后，工作效率平均提升了85%，满意度高达98%。这些数字背后是我们对产品质量的坚持和对客户需求的深入理解。",image:t(4039)},{title:"为什么选择我们",description:"我们的团队由行业专家组成，不仅懂技术，更了解您的业务痛点。我们提供量身定制的解决方案，而不是千篇一律的产品。数据安全是我们的底线，所有信息都经过加密处理。最重要的是，我们始终在进步，不断根据用户反馈优化产品。",image:t(7224)},{title:"获取帮助与支持",description:"遇到问题？别担心，我们提供多种支持渠道。从详细的使用文档到直观的视频教程，从7×24小时在线客服到活跃的用户社区，总有一种方式适合您。我们的目标是不让任何一个问题成为您使用我们产品的障碍。",image:t(9755)}]),i=()=>{n.value=(n.value+1)%r.value.length},c=()=>{n.value=(n.value-1+r.value.length)%r.value.length},u=e=>{n.value=e};let d;const m=()=>{d=setInterval(()=>{i()},5e3)},h=()=>{clearInterval(d)},g=async()=>{try{const e=await fetch("http://localhost:5000/api/message-quota"),a=await e.json();a.success?o.value="enterprise"===a.quota.account_level:o.value=!1}catch(e){console.error("获取版本状态失败:",e),o.value=!1}},f=(0,v.KR)({pricingPlans:[{id:1,name:"基础版",price:"--",period:"/月",features:["--","--","--"],isPopular:!1},{id:2,name:"企业版",price:"--",period:"/月",features:["--","--","--"],isPopular:!0},{id:3,name:"定制版",price:"--",period:"联系我们",features:["--","--","--"],isPopular:!1}],keyMetrics:[{id:1,value:"--",label:"活跃企业客户"},{id:2,value:"--",label:"自动化任务"},{id:3,value:"--",label:"系统稳定性"},{id:4,value:"--",label:"消息发送量"}],dashboardData:[{id:1,title:"自动化任务完成率",value:"--",status:"null",footer:"--"},{id:2,title:"消息送达率",value:"--",status:"null",footer:"--"},{id:3,title:"AI辅助功能使用率",value:"--",status:"null",footer:"--"},{id:4,title:"系统状态",value:"正在连接",status:"normal",footer:"--"}],testimonials:[{id:1,quote:"--",customerName:"--",customerCompany:"--"},{id:2,quote:"--",customerName:"--",customerCompany:"--"},{id:3,quote:"--",customerName:"--",customerCompany:"--"}]}),b=async()=>{try{const e=await fetch("http://localhost:5000/api/home-data"),t=await e.json();t.pricingPlans&&(f.value.pricingPlans=t.pricingPlans),t.keyMetrics&&(f.value.keyMetrics=t.keyMetrics),t.dashboardData&&(f.value.dashboardData=t.dashboardData),t.testimonials&&(f.value.testimonials=t.testimonials),a.value||y()}catch(e){console.error("获取首页数据失败:",e)}},y=()=>{a.value=!0;const e=document.querySelectorAll(".counter");e.length&&e.forEach(e=>{e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.5s ease, transform 0.5s ease",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)";const a=e.dataset.target;if(a&&"--"!==a&&!isNaN(parseFloat(a))){const t=parseFloat(a),l=2500,s=1e3/60,o=Math.round(l/s);let n=0;const r=e=>e*(2-e),i=()=>{n++;const a=r(n/o),l=Math.round(t*a);e.innerText=l.toLocaleString(),n<o?requestAnimationFrame(i):e.innerText=t.toLocaleString()};i()}},300*Math.random())}),setTimeout(()=>{document.querySelectorAll(".pricing-card, .dashboard-card, .testimonial-card, .metric-card, .carousel-slide").forEach((e,a)=>{e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},100*a+100*Math.random())})},100)},w=e=>{3===e.id?k.nk.info("联系客服获取定制版报价"):l.value=!0},L=e=>{console.log("提交激活码:",e),k.nk.success("提交激活码成功，等待验证结果"),l.value=!1};return(0,s.sV)(()=>{g(),y(),b(),o.value&&m()}),(0,s.hi)(()=>{h()}),(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",B,[o.value?((0,s.uX)(),(0,s.CE)("section",te,[(0,s.Lk)("div",le,[(0,s.Lk)("div",{class:"carousel-wrapper",style:(0,p.Tr)({transform:`translateX(-${100*n.value}%)`})},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{class:"carousel-slide",key:a},[(0,s.Lk)("div",se,[(0,s.Lk)("div",oe,[(0,s.Lk)("img",{src:e.image,alt:e.title},null,8,ne)]),(0,s.Lk)("div",re,[(0,s.Lk)("h3",null,(0,p.v_)(e.title),1),(0,s.Lk)("p",null,(0,p.v_)(e.description),1)])])]))),128))],4),(0,s.Lk)("button",{class:"carousel-control prev",onClick:c},"❮"),(0,s.Lk)("button",{class:"carousel-control next",onClick:i},"❯")]),(0,s.Lk)("div",ie,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(e,a)=>((0,s.uX)(),(0,s.CE)("span",{key:a,class:(0,p.C4)(["indicator",{active:n.value===a}]),onClick:e=>u(a)},null,10,ce))),128))])])):((0,s.uX)(),(0,s.CE)("section",z,[a[2]||(a[2]=(0,s.Lk)("div",{class:"section-header"},[(0,s.Lk)("h2",null,"选择适合您企业的方案"),(0,s.Lk)("p",null,"灵活的定价策略，满足不同规模企业的需求")],-1)),(0,s.Lk)("div",Y,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(f.value.pricingPlans,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:(0,p.C4)(["pricing-card",{popular:e.isPopular}])},[e.isPopular?((0,s.uX)(),(0,s.CE)("div",H,"最受欢迎")):(0,s.Q3)("",!0),(0,s.Lk)("div",Q,[(0,s.Lk)("h3",null,(0,p.v_)(e.name),1),(0,s.Lk)("div",J,[(0,s.Lk)("span",Z,(0,p.v_)("number"===typeof e.price?"¥"+e.price:e.price),1),(0,s.Lk)("span",G,(0,p.v_)(e.period),1)])]),(0,s.Lk)("div",ee,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.features,e=>((0,s.uX)(),(0,s.CE)("div",{class:"feature",key:e},[a[1]||(a[1]=(0,s.Lk)("i",{class:"el-icon-check"},null,-1)),(0,s.Lk)("span",null,(0,p.v_)(e),1)]))),128))]),(0,s.Lk)("button",{class:(0,p.C4)(["select-plan",{"popular-btn":e.isPopular}]),onClick:a=>w(e)},(0,p.v_)(e.isPopular?"选择方案":3===e.id?"联系我们":"选择方案"),11,ae)],2))),128))])])),(0,s.Lk)("section",ue,[(0,s.Lk)("div",de,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(f.value.keyMetrics,e=>((0,s.uX)(),(0,s.CE)("div",{class:"metric-card",key:e.id},[(0,s.Lk)("div",{class:"metric-value counter","data-target":e.value},(0,p.v_)(e.value),9,pe),(0,s.Lk)("div",ve,(0,p.v_)(e.label),1)]))),128))])]),(0,s.Lk)("section",ke,[a[3]||(a[3]=(0,s.Lk)("div",{class:"section-header"},[(0,s.Lk)("h2",null,"系统概览"),(0,s.Lk)("p",null,"实时监控您的自动化状态和效果")],-1)),(0,s.Lk)("div",me,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(f.value.dashboardData,e=>((0,s.uX)(),(0,s.CE)("div",{class:"dashboard-card",key:e.id},[(0,s.Lk)("div",he,[(0,s.Lk)("h3",null,(0,p.v_)(e.title),1),e.trend?((0,s.uX)(),(0,s.CE)("span",{key:0,class:(0,p.C4)("up"===e.trend?"trend-up":"trend-down")},(0,p.v_)("up"===e.trend?"↑":"↓")+" "+(0,p.v_)(e.trendValue)+"% ",3)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",{class:(0,p.C4)(["card-value",{"status-normal":"normal"===e.status,"status-abnormal":"abnormal"===e.status}])},(0,p.v_)(e.value)+(0,p.v_)(4!==e.id?"%":""),3),(0,s.Lk)("div",ge,[(0,s.Lk)("span",null,(0,p.v_)(e.footer),1)])]))),128))])]),(0,s.Lk)("section",fe,[a[4]||(a[4]=(0,s.Lk)("div",{class:"section-header"},[(0,s.Lk)("h2",null,"客户评价"),(0,s.Lk)("p",null,"听听我们的客户怎么说")],-1)),(0,s.Lk)("div",be,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(f.value.testimonials,e=>((0,s.uX)(),(0,s.CE)("div",{class:"testimonial-card",key:e.id},[(0,s.Lk)("div",ye,'"'+(0,p.v_)(e.quote)+'"',1),(0,s.Lk)("div",we,[(0,s.Lk)("img",{src:t(8144),alt:"客户头像",class:"w-12 h-12 rounded-full object-cover mr-4 bg-gray-100"},null,8,Le),(0,s.Lk)("div",_e,[(0,s.Lk)("div",Ce,(0,p.v_)(e.customerName),1),(0,s.Lk)("div",xe,(0,p.v_)(e.customerCompany),1)])])]))),128))])])]),(0,s.bF)($,{show:l.value,onClose:a[0]||(a[0]=e=>l.value=!1),onActivation:L},null,8,["show"])],64))}};const Re=Fe;var Te=Re,Ee=t(2933),Ie=t(7477),$e=t(3230);const Se={class:"auto-info-container"},je={class:"task-creation-section"},Ae={class:"task-list-section"},Ve={class:"card-header"},De={class:"header-title"},Me={class:"task-count"},Ke={class:"task-actions"},Oe={class:"message-content"},We={class:"operation-buttons"};var Ue={__name:"AutoInfoView",setup(e){const a=(0,v.KR)(),t=(0,v.Kh)({recipient:"",sendTime:"",repeatType:"none",repeatDays:[],messageContent:""}),l={recipient:[{required:!0,message:"请输入接收者",trigger:"blur"},{validator:(e,a,t)=>{a&&a.trim()?t():t(new Error("请输入接收者"))},trigger:"blur"}],sendTime:[{required:!0,message:"请选择发送时间",trigger:"change"}],messageContent:[{validator:(e,a,t)=>{t()},trigger:"blur"}],repeatType:[{required:!0,message:"请选择重复类型",trigger:"change"}]},o=(0,v.KR)([]),n=(0,v.KR)(!1),r=[{label:"不重复",value:"none"},{label:"每天",value:"daily"},{label:"法定工作日",value:"workday"},{label:"法定节假日",value:"holiday"},{label:"自定义",value:"custom"}],i=[{label:"周一",value:"1"},{label:"周二",value:"2"},{label:"周三",value:"3"},{label:"周四",value:"4"},{label:"周五",value:"5"},{label:"周六",value:"6"},{label:"周日",value:"0"}],c=(0,s.EW)(()=>{const e=new Date;return e.setMinutes(e.getMinutes()+30),e}),u=(0,s.EW)(()=>[...o.value].sort((e,a)=>new Date(e.sendTime)-new Date(a.sendTime))),d=()=>{a.value?.resetFields()},m=async()=>{try{if(await a.value.validate(),!t.messageContent)return void k.nk.error("请填写消息内容");const e=[{...t,status:"pending",createdAt:(new Date).toISOString()}];let l=0;for(const a of e){const e=await fetch("http://localhost:5000/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(e.ok){const a=await e.json();o.value.push(a),l++}}l===e.length?(k.nk.success(`成功创建 ${l} 个任务`),d()):k.nk.error(`部分任务创建失败，成功创建 ${l}/${e.length} 个任务`)}catch(e){e.errors||(console.error("创建任务失败:",e),k.nk.error("创建任务失败"))}},h=({row:e})=>"pending"===e.status?"task-pending":"task-completed",g=async e=>{const a=o.value.find(a=>a.id===e);if(a){t.recipient=a.recipient,t.sendTime=a.sendTime,t.repeatType=a.repeatType,t.repeatDays=a.repeatDays,t.messageContent=a.messageContent;try{const a=await fetch(`http://localhost:5000/api/tasks/${e}`,{method:"DELETE"});a.ok?(o.value=o.value.filter(a=>a.id!==e),(0,k.nk)({message:"请修改任务信息",type:"info"})):k.nk.error("删除原任务失败，请稍后重试")}catch(l){console.error("删除原任务失败:",l),k.nk.error("删除原任务失败，请稍后重试")}}},f=async e=>{Ee.s.confirm("确定要删除这个任务吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const a=await fetch(`http://localhost:5000/api/tasks/${e}`,{method:"DELETE"});a.ok?(o.value=o.value.filter(a=>a.id!==e),k.nk.success("任务删除成功")):k.nk.error("任务删除失败，请稍后重试")}catch(a){console.error("删除任务失败:",a),k.nk.error("任务删除失败，请稍后重试")}}).catch(()=>{})},b=async()=>{Ee.s.confirm("确定要清空所有任务吗？此操作将删除所有任务（包括已完成和未完成的任务），且不可恢复！","警告",{confirmButtonText:"确定清空",cancelButtonText:"取消",type:"warning",confirmButtonClass:"el-button--danger"}).then(async()=>{try{const e=await fetch("http://localhost:5000/api/tasks",{method:"DELETE"});if(e.ok)o.value=[],k.nk.success("所有任务已清空");else{const a=await e.text();k.nk.error(`清空任务失败: ${a||"未知错误"}`)}}catch(e){console.error("清空任务失败:",e),k.nk.error("清空任务失败，请检查网络连接")}}).catch(()=>{})},y=e=>{if(!e)return"";const a=new Date(e);return isNaN(a.getTime())?e:`${a.getFullYear()}-${w(a.getMonth()+1)}-${w(a.getDate())} ${w(a.getHours())}:${w(a.getMinutes())}`},w=e=>e<10?"0"+e:e,L=async()=>{try{const e=await fetch("http://localhost:5000/api/tasks");if(e.ok){const a=await e.json();o.value=a;const t=a.filter(e=>"pending"===e.status);0===t.length&&n.value&&(n.value=!1,k.nk.success("所有任务已完成，调度器已自动停止"))}else{const a=await e.text();k.nk.error(`刷新任务列表失败: ${a||"未知错误"}`)}}catch(e){k.nk.error(`刷新任务列表失败: ${e.message||"网络错误"}`)}},_=()=>{if(0===o.value.length)return void k.nk.warning("没有任务可导出");const e=o.value.map(e=>({"发送时间":y(e.sendTime),"接收者":e.recipient,"内容":e.filePath||e.messageContent,"重复类型":R(e.repeatType,e.repeatDays)})),a=$e.Wp.json_to_sheet(e),t=$e.Wp.book_new();$e.Wp.book_append_sheet(t,a,"任务列表"),$e._h(t,`tasks_export_${(new Date).toISOString().slice(0,10)}.xlsx`),k.nk.success("任务导出成功")},C=(0,v.KR)(null),x=()=>{C.value?.click()},F=async e=>{const a=e.target.files[0];if(a){try{const e=new FileReader;e.onload=async e=>{try{const a=new Uint8Array(e.target.result),t=$e.LF(a,{type:"array"}),l=t.SheetNames[0],s=t.Sheets[l],o=$e.Wp.sheet_to_json(s);if(!Array.isArray(o))throw new Error("导入的文件格式不正确");const n=o.map(e=>{let a="none",t=[];const l=e["重复类型"]||"";if(l.includes("每天"))a="daily";else if(l.includes("法定工作日"))a="workday";else if(l.includes("法定节假日"))a="holiday";else if(l.includes("自定义")){a="custom";const e={"周日":"0","周一":"1","周二":"2","周三":"3","周四":"4","周五":"5","周六":"6"};Object.keys(e).forEach(a=>{l.includes(a)&&t.push(e[a])})}return{recipient:e["接收者"]||"",sendTime:e["发送时间"]?new Date(e["发送时间"]).toISOString():"",messageContent:e["内容"]||"",repeatType:a,repeatDays:t}}).filter(e=>e.recipient&&e.sendTime&&(e.messageContent||e.filePath)),r=await fetch("http://localhost:5000/api/tasks/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error("服务器导入失败");k.nk.success(`成功导入 ${n.length} 个任务`),L()}catch(a){k.nk.error(`导入失败: ${a.message}`)}},e.readAsArrayBuffer(a)}catch(t){k.nk.error(`导入失败: ${t.message}`)}e.target.value=""}},R=(e,a)=>{const t={0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"};switch(e){case"none":return"不重复";case"daily":return"每天";case"workday":return"法定工作日";case"holiday":return"法定节假日";case"custom":return`自定义: ${a?.map(e=>t[e]).join(", ")}`;default:return"不重复"}},T=async()=>{try{if(n.value){const e=await fetch("http://localhost:5000/api/task-scheduler/stop",{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok)n.value=!1,k.nk.success("任务调度器已停止");else{const a=await e.json();k.nk.error(`停止失败: ${a.error||"未知错误"}`)}}else{const e=await fetch("http://localhost:5000/api/task-scheduler/start",{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok)n.value=!0,k.nk.success("任务调度器已启动");else{const a=await e.json();k.nk.error(`启动失败: ${a.error||"未知错误"}`)}}}catch(e){console.error("操作任务调度器失败:",e),k.nk.error("操作失败，请检查网络连接")}},E=async()=>{try{const e=await fetch("http://localhost:5000/api/task-scheduler/status");if(e.ok){const a=await e.json();n.value=a.isRunning}}catch(e){console.error("获取调度器状态失败:",e)}};return(0,s.sV)(()=>{L(),E();const e=setInterval(()=>{E(),L()},3e3);(0,s.hi)(()=>{clearInterval(e)})}),(e,k)=>{const w=(0,s.g2)("el-icon"),E=(0,s.g2)("el-input"),I=(0,s.g2)("el-form-item"),$=(0,s.g2)("el-col"),S=(0,s.g2)("el-date-picker"),j=(0,s.g2)("el-option"),A=(0,s.g2)("el-select"),V=(0,s.g2)("el-checkbox"),D=(0,s.g2)("el-checkbox-group"),M=(0,s.g2)("el-row"),K=(0,s.g2)("el-button"),O=(0,s.g2)("el-form"),W=(0,s.g2)("el-card"),U=(0,s.g2)("el-button-group"),P=(0,s.g2)("el-table-column"),X=(0,s.g2)("el-tooltip"),q=(0,s.g2)("el-tag"),N=(0,s.g2)("el-table"),B=(0,s.g2)("el-empty");return(0,s.uX)(),(0,s.CE)("div",Se,[(0,s.Lk)("section",je,[(0,s.bF)(W,{class:"task-creation-card",shadow:"hover"},{header:(0,s.k6)(()=>[...k[5]||(k[5]=[(0,s.Lk)("div",{class:"card-header"},[(0,s.Lk)("span",null,"创建新任务")],-1)])]),default:(0,s.k6)(()=>[(0,s.bF)(O,{ref_key:"taskForm",ref:a,model:t,rules:l,"label-width":"100px"},{default:(0,s.k6)(()=>[(0,s.bF)(M,{gutter:20},{default:(0,s.k6)(()=>[(0,s.bF)($,{xs:24,sm:12,md:12,lg:12},{default:(0,s.k6)(()=>[(0,s.bF)(I,{label:"接收者",prop:"recipient"},{default:(0,s.k6)(()=>[(0,s.bF)(E,{modelValue:t.recipient,"onUpdate:modelValue":k[0]||(k[0]=e=>t.recipient=e),placeholder:"输入接收者信息",clearable:""},{prefix:(0,s.k6)(()=>[(0,s.bF)(w,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,v.R1)(Ie.KJW))]),_:1})]),_:1},8,["modelValue"]),k[6]||(k[6]=(0,s.Lk)("div",{class:"el-form-item__tip"},"多个接收者用逗号分隔",-1))]),_:1})]),_:1}),(0,s.bF)($,{xs:24,sm:12,md:12,lg:12},{default:(0,s.k6)(()=>[(0,s.bF)(I,{label:"发送时间",prop:"sendTime"},{default:(0,s.k6)(()=>[(0,s.bF)(S,{modelValue:t.sendTime,"onUpdate:modelValue":k[1]||(k[1]=e=>t.sendTime=e),type:"datetime",placeholder:"选择发送时间","value-format":"YYYY-MM-DDTHH:mm","default-value":c.value,style:{width:"100%"}},null,8,["modelValue","default-value"]),k[7]||(k[7]=(0,s.Lk)("div",{class:"el-form-item__tip"},"选择发送时间，到点就会发送",-1))]),_:1})]),_:1}),(0,s.bF)($,{xs:24,sm:12,md:12,lg:12},{default:(0,s.k6)(()=>[(0,s.bF)(I,{label:"重复选项",prop:"repeatType"},{default:(0,s.k6)(()=>[(0,s.bF)(A,{modelValue:t.repeatType,"onUpdate:modelValue":k[2]||(k[2]=e=>t.repeatType=e),placeholder:"选择重复类型",style:{width:"100%"}},{default:(0,s.k6)(()=>[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(r,e=>(0,s.bF)(j,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),"custom"===t.repeatType?((0,s.uX)(),(0,s.Wv)(I,{key:0,prop:"repeatDays",rules:[{validator:(e,a,l)=>{"custom"!==t.repeatType||a&&0!==a.length?l():l(new Error("请至少选择一个重复日期"))},trigger:"change"}]},{default:(0,s.k6)(()=>[k[8]||(k[8]=(0,s.Lk)("p",{class:"el-form-item__tip"},"选择重复日期：",-1)),(0,s.bF)(D,{modelValue:t.repeatDays,"onUpdate:modelValue":k[3]||(k[3]=e=>t.repeatDays=e)},{default:(0,s.k6)(()=>[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(i,e=>(0,s.bF)(V,{key:e.value,label:e.value},{default:(0,s.k6)(()=>[(0,s.eW)((0,p.v_)(e.label),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1},8,["rules"])):(0,s.Q3)("",!0),k[9]||(k[9]=(0,s.Lk)("div",{class:"el-form-item__tip"},"像定闹钟一样，选择重复日期",-1))]),_:1})]),_:1}),(0,s.bF)($,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(I,{label:"信息内容",prop:"messageContent"},{default:(0,s.k6)(()=>[(0,s.bF)(E,{modelValue:t.messageContent,"onUpdate:modelValue":k[4]||(k[4]=e=>t.messageContent=e),type:"textarea",placeholder:"输入要发送的消息内容或文件路径",rows:4,"show-word-limit":"",maxlength:"500"},null,8,["modelValue"]),k[10]||(k[10]=(0,s.Lk)("div",{class:"el-form-item__tip"},[(0,s.Lk)("p",null,[(0,s.eW)("如需发送文件，请直接输入完整的文件路径，如："),(0,s.Lk)("strong",null,"D:\\杨圣洲作品\\软件需求文档.pdf"),(0,s.eW)("，应尽量避免发送桌面的文件，桌面路径过长可能会发送失败。")]),(0,s.Lk)("p",null,[(0,s.eW)("如需发送表情包，请输入 "),(0,s.Lk)("strong",null,"SendEmotion:1"),(0,s.eW)(" ，其中1为表情包次序， "),(0,s.Lk)("strong",null,"SendEmotion:2,3,4"),(0,s.eW)(" 表示系统随机从第2、3、4个表情包中选一个发送。")])],-1))]),_:1})]),_:1})]),_:1}),(0,s.bF)(I,null,{default:(0,s.k6)(()=>[(0,s.bF)(K,{type:"default",onClick:d},{default:(0,s.k6)(()=>[...k[11]||(k[11]=[(0,s.eW)("重置",-1)])]),_:1}),(0,s.bF)(K,{type:"primary",onClick:m},{default:(0,s.k6)(()=>[...k[12]||(k[12]=[(0,s.eW)(" 创建任务 ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),(0,s.Lk)("section",Ae,[(0,s.bF)(W,null,{header:(0,s.k6)(()=>[(0,s.Lk)("div",Ve,[(0,s.Lk)("div",De,[k[13]||(k[13]=(0,s.Lk)("span",null,"任务列表",-1)),(0,s.Lk)("span",Me,(0,p.v_)(o.value.length),1)]),(0,s.Lk)("div",Ke,[(0,s.bF)(U,null,{default:(0,s.k6)(()=>[(0,s.bF)(K,{onClick:L},{default:(0,s.k6)(()=>[(0,s.bF)(w,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,v.R1)(Ie.C42))]),_:1}),k[14]||(k[14]=(0,s.eW)("刷新 ",-1))]),_:1}),(0,s.bF)(K,{onClick:x},{default:(0,s.k6)(()=>[...k[15]||(k[15]=[(0,s.eW)(" 导入 ",-1)])]),_:1}),(0,s.bF)(K,{disabled:0===o.value.length,onClick:_},{default:(0,s.k6)(()=>[...k[16]||(k[16]=[(0,s.eW)(" 导出 ",-1)])]),_:1},8,["disabled"]),(0,s.bF)(K,{disabled:0===o.value.length,onClick:b,type:"danger"},{default:(0,s.k6)(()=>[...k[17]||(k[17]=[(0,s.eW)(" 清空 ",-1)])]),_:1},8,["disabled"]),(0,s.bF)(K,{disabled:0===o.value.length,onClick:T,type:n.value?"danger":"primary"},{default:(0,s.k6)(()=>[(0,s.eW)((0,p.v_)(n.value?"停止执行":"开始执行"),1)]),_:1},8,["disabled","type"])]),_:1}),(0,s.Lk)("input",{type:"file",ref_key:"fileInput",ref:C,style:{display:"none"},accept:".xlsx",onChange:F},null,544)])])]),default:(0,s.k6)(()=>[o.value.length>0?((0,s.uX)(),(0,s.Wv)(N,{key:0,data:u.value,style:{width:"100%"},stripe:"",fit:"","row-class-name":h},{default:(0,s.k6)(()=>[(0,s.bF)(P,{prop:"recipient",label:"接收者","min-width":"20px"}),(0,s.bF)(P,{prop:"messageContent",label:"内容","min-width":"20px"},{default:(0,s.k6)(({row:e})=>[(0,s.bF)(X,{content:e.filePath||e.messageContent,placement:"top"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",Oe,(0,p.v_)(e.filePath||e.messageContent),1)]),_:2},1032,["content"])]),_:1}),(0,s.bF)(P,{prop:"sendTime",label:"发送时间","min-width":"15px"},{default:(0,s.k6)(({row:e})=>[(0,s.eW)((0,p.v_)(y(e.sendTime)),1)]),_:1}),(0,s.bF)(P,{label:"重复类型","min-width":"20px"},{default:(0,s.k6)(({row:e})=>[(0,s.eW)((0,p.v_)(R(e.repeatType,e.repeatDays)),1)]),_:1}),(0,s.bF)(P,{label:"状态","min-width":"10px",fixed:"right"},{default:(0,s.k6)(({row:e})=>[(0,s.bF)(q,{type:"pending"===e.status?"warning":"completed"===e.status?"success":"danger",size:"small"},{default:(0,s.k6)(()=>[(0,s.eW)((0,p.v_)("pending"===e.status?"待执行":"completed"===e.status?"已完成":"失败"),1)]),_:2},1032,["type"])]),_:1}),o.value.some(e=>e.errorMessage)?((0,s.uX)(),(0,s.Wv)(P,{key:0,label:"错误信息","min-width":"20px"},{default:(0,s.k6)(({row:e})=>[e.errorMessage?((0,s.uX)(),(0,s.Wv)(X,{key:0,content:e.errorMessage,placement:"top"},{default:(0,s.k6)(()=>[(0,s.bF)(q,{type:"danger",size:"small"},{default:(0,s.k6)(()=>[(0,s.bF)(w,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,v.R1)(Ie.N5l))]),_:1}),k[18]||(k[18]=(0,s.eW)(" 查看错误 ",-1))]),_:1})]),_:1},8,["content"])):(0,s.Q3)("",!0)]),_:1})):(0,s.Q3)("",!0),(0,s.bF)(P,{label:"操作","min-width":"16px",fixed:"right"},{default:(0,s.k6)(({row:e})=>[(0,s.Lk)("div",We,[(0,s.bF)(K,{type:"primary",size:"small",onClick:a=>g(e.id),icon:(0,v.R1)(Ie.ffu)},{default:(0,s.k6)(()=>[...k[19]||(k[19]=[(0,s.eW)("编辑",-1)])]),_:1},8,["onClick","icon"]),(0,s.bF)(K,{type:"danger",size:"small",onClick:a=>f(e.id),icon:(0,v.R1)(Ie.epd)},{default:(0,s.k6)(()=>[...k[20]||(k[20]=[(0,s.eW)("删除",-1)])]),_:1},8,["onClick","icon"])])]),_:1})]),_:1},8,["data"])):((0,s.uX)(),(0,s.Wv)(B,{key:1,description:"快创建您的第一个自动信息任务"}))]),_:1})])])}}};const Pe=(0,r.A)(Ue,[["__scopeId","data-v-3d71dc0a"]]);var Xe=Pe;const qe={class:"app-container"},Ne={class:"main-content"},Be={class:"top-row"},ze={class:"config-card"},Ye={class:"status-toggle"},He={key:0,class:"takeover-time ml-3"},Qe={class:"text-primary"},Je={class:"action-buttons"},Ze={class:"insights-card"},Ge={class:"card-body"},ea={class:"stats-grid"},aa={class:"stat-item"},ta={class:"stat-value counter"},la={class:"stat-item"},sa={class:"stat-value counter"},oa={class:"stat-item"},na={class:"stat-value counter"},ra={class:"chart-container"},ia={class:"chart-card"},ca={class:"chart-header"},ua={class:"chart-actions"},da={class:"chart-content"},pa={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"180",viewBox:"0 0 400 180"},va=["d"],ka=["cx","cy"],ma=["x"],ha={class:"custom-rules-container"},ga={class:"rule-actions"},fa={class:"operation-buttons"},ba={class:"dialog-footer"},ya={class:"card-header"},wa={class:"history-controls"},La={class:"time-cell"},_a={class:"message-content"},Ca={class:"reply-cell"},xa={class:"operation-buttons"},Fa={key:1,class:"pagination-container"};var Ra={__name:"AITakeoverView",setup(e){const a=(0,v.KR)(null),t=(0,v.KR)(null),l=(0,v.Kh)({aiStatus:!1,replyDelay:0,minReplyInterval:30,contactPerson:"文件传输助手",aiPersona:"你是一个友好、专业的AI助手，致力于为用户提供准确、及时的帮助。",customRules:[]}),o=(0,v.KR)(!1),n=(0,v.KR)(null),r=(0,v.KR)(0),i=(0,v.KR)(null),c=(0,s.EW)(()=>{const e=Math.floor(r.value/1e3),a=Math.floor(e/60),t=e%60;return`${a.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}),u=async e=>{o.value=!0;try{if(e){const e=await fetch("http://localhost:5000/api/ai-takeover/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contactPerson:l.contactPerson,aiPersona:l.aiPersona,onlyAt:!1,replyDelay:l.replyDelay,minReplyInterval:l.minReplyInterval})}),a=await e.json();a.success?(l.aiStatus=Boolean(a.aiStatus??!0),n.value=Date.now(),i.value=setInterval(()=>{r.value=Date.now()-n.value},1e3),k.nk.success("AI已成功开始接管消息回复")):(l.aiStatus=!1,k.nk.error(`开始接管失败: ${a.error||"未知错误"}`))}else{const e=await fetch("http://localhost:5000/api/ai-takeover/stop",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contactPerson:l.contactPerson})}),a=await e.json();a.success?(l.aiStatus=Boolean(a.aiStatus??!1),clearInterval(i.value),i.value=null,k.nk.success("AI已成功停止接管消息回复")):(l.aiStatus=!0,k.nk.error(`停止接管失败: ${a.error||"未知错误"}`))}}catch(a){console.error("AI接管操作失败:",a),l.aiStatus=!e,k.nk.error(`AI接管操作失败: ${a.message||"网络错误"}`)}finally{o.value=!1}};(0,s.hi)(()=>{i.value&&clearInterval(i.value)});const d={replyDelay:[{required:!0,message:"请输入回复延迟",trigger:"blur"},{type:"number",message:"回复延迟必须是数字",trigger:"blur"}],minReplyInterval:[{required:!0,message:"请输入最小回复间隔时间",trigger:"blur"},{type:"number",message:"最小回复间隔必须是数字",trigger:"blur"}],contactPerson:[{required:!0,message:"请输入接管联系人",trigger:"blur"}],aiPersona:[{required:!0,message:"请输入AI人设",trigger:"blur"},{min:10,max:500,message:"AI人设长度必须在10-500个字符之间",trigger:"blur"}]},m=(0,v.KR)(!1),h=(0,v.KR)(null),g=(0,v.Kh)({matchType:"contains",keyword:"",reply:""}),f={keyword:[{required:!0,message:"请输入关键词或规则",trigger:"blur"},{min:1,max:100,message:"关键词长度必须在1-100个字符之间",trigger:"blur"}],reply:[{required:!0,message:"请输入回复内容",trigger:"blur"},{min:5,max:500,message:"回复内容长度必须在5-500个字符之间",trigger:"blur"}]},b=()=>{h.value&&h.value.resetFields(),Object.assign(g,{matchType:"contains",keyword:"",reply:""}),m.value=!0},y=async()=>{try{await h.value.validate(),l.customRules.push({id:Date.now(),matchType:g.matchType,keyword:g.keyword,reply:g.reply}),m.value=!1,k.nk.success("规则添加成功"),await M()}catch(e){console.error("表单验证失败:",e),k.nk.error("请检查表单填写是否正确")}},w=async e=>{l.customRules.splice(e,1),await M(),k.nk.success("规则删除成功")},L=(0,v.KR)([]),_=async()=>{try{E.value=!0;const e=await fetch("http://localhost:5000/api/ai-history");if(e.ok){const a=await e.json();L.value=a.map(e=>({time:e.time||e.timestamp,originalMessage:e.message,aiReply:e.reply,status:e.status}))}else k.nk.error("获取回复历史失败")}catch(e){console.error("获取回复历史失败:",e),k.nk.error("网络错误，无法获取回复历史")}finally{E.value=!1}},C=async()=>{try{const e=await fetch("http://localhost:5000/api/ai-settings");if(e.ok){const a=await e.json(),t=Array.isArray(a)&&a.length>0?a[0]:a;Object.assign(l,{...t,replyDelay:Number(t.replyDelay??0),minReplyInterval:Number(t.minReplyInterval??0),customRules:t.customRules||[],aiStatus:Boolean(t.aiStatus??!1)}),await(0,s.dY)()}else k.nk.error("获取AI设置失败")}catch(e){console.error("获取AI设置失败:",e),k.nk.error("网络错误，无法获取AI设置")}},x=(0,v.KR)(""),F=(0,v.KR)("all"),R=(0,v.KR)(1),T=(0,v.KR)(5),E=(0,v.KR)(!1),I=(0,v.KR)(!1),$=(0,v.KR)("7d"),S=(0,v.Kh)({replyRate:0,averageTime:0,satisfactionRate:0}),j=(0,s.EW)(()=>L.value.filter(e=>{const a=e.originalMessage.toLowerCase().includes(x.value.toLowerCase())||e.aiReply.toLowerCase().includes(x.value.toLowerCase()),t="all"===F.value||e.status===F.value;return a&&t})),A=(0,s.EW)(()=>{const e=(R.value-1)*T.value;return j.value.slice(e,e+T.value)}),V=e=>{T.value=e,R.value=1},D=e=>{R.value=e},M=async()=>{I.value=!0;try{l.contactPerson.trim()||(l.contactPerson="文件传输助手"),a.value&&await a.value.validate();const e={...l,replyDelay:Number(l.replyDelay),minReplyInterval:Number(l.minReplyInterval),customRules:Array.isArray(l.customRules)?l.customRules:[]},t=await fetch("http://localhost:5000/api/ai-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const e=await t.json(),a=Array.isArray(e)&&e.length>0?e[0]:e;l.customRules=a.customRules||[],l.aiStatus=Boolean(a.aiStatus??!1)}else{const e=await t.json().catch(()=>({}));k.nk.error(`保存失败: ${e.error||"未知错误，请稍后重试"}`)}}catch(e){console.error("保存设置失败:",e),"ValidationError"===e.name?k.nk.error(`表单验证失败: ${e.message}`):k.nk.error(`保存失败: ${e.message||"网络错误"}`)}finally{I.value=!1}},K=async()=>{Ee.s.confirm("确定要重置所有设置吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{l.aiStatus=!1,l.replyDelay=5,l.minReplyInterval=60,l.contactPerson="",l.aiPersona="我是一个友好、专业的AI助手，致力于为用户提供准确、及时的帮助。",l.customRules=[],k.nk.success("设置已重置")}).catch(()=>{})},O=e=>{(0,Ee.s)({title:"消息详情",message:`\n      <div class="message-detail-container">\n        <div class="detail-header">\n          <div class="time-badge">\n            <el-icon><Clock /></el-icon>\n            ${e.time}\n          </div>\n          <div class="status-badge ${"replied"===e.status?"status-replied":"status-pending"}">\n            ${"replied"===e.status?"✅ 已回复":"⏳ 未回复"}\n          </div>\n        </div>\n        \n        <div class="message-content">\n          <div class="message-section">\n            <div class="message-label">\n              <el-icon><ChatDotRound /></el-icon>\n              原始消息\n            </div>\n            <div class="message-bubble user-message">\n              ${e.originalMessage}\n            </div>\n          </div>\n          \n          <div class="message-section">\n            <div class="message-label">\n              <el-icon><Robot /></el-icon>\n              AI回复\n            </div>\n            <div class="message-bubble ai-message">\n              ${e.aiReply||'<span class="no-reply">暂无回复</span>'}\n            </div>\n          </div>\n        </div>\n        \n        <div class="detail-footer">\n          <div class="info-item">\n            <el-icon><Calendar /></el-icon>\n            <span>消息时间: ${B(e.time)} ${z(e.time)}</span>\n          </div>\n          ${e.matchType?`<div class="info-item">\n            <el-icon><Connection /></el-icon>\n            <span>匹配类型: ${e.matchType}</span>\n          </div>`:""}\n        </div>\n      </div>\n    `,dangerouslyUseHTMLString:!0,customClass:"message-detail-dialog",confirmButtonText:"关闭",width:"500px"})},W=(0,v.KR)({dates:[],counts:[]}),U=async e=>{const a=new AbortController,t=a.signal;P.value=a;try{const a=await fetch(`http://localhost:5000/api/stats/${e}`,{signal:t});if(a.ok){const e=await a.json();W.value=e.chartData||{dates:[],counts:[]},e.stats&&Object.assign(S,{replyRate:Number(e.stats.replyRate??0),averageTime:Number(e.stats.averageTime??0),satisfactionRate:Number(e.stats.satisfactionRate??100)})}}catch(l){"AbortError"!==l.name&&console.error("获取图表数据失败:",l)}finally{P.value===a&&(P.value=null)}},P=(0,v.KR)(null);(0,s.hi)(()=>{P.value&&(P.value.abort(),P.value=null)}),(0,s.wB)($,e=>{U(e)});const X=async()=>{try{E.value=!0,await U($.value)}catch(e){console.error("获取AI看板数据失败:",e),k.nk.error("网络错误，无法获取AI看板数据")}finally{E.value=!1}},q=(0,s.EW)(()=>Math.max(...W.value.counts,1)),N=e=>{if(!e||0===e.length)return"M0,150 L400,150";const a=e.map((a,t)=>{const l=t*(400/(e.length-1)),s=150-a/q.value*100;return`${l},${s}`});let t=`M${a[0]}`;for(let l=1;l<a.length;l++){const e=a[l-1].split(","),s=a[l].split(","),o=(Number(e[0])+Number(s[0]))/2,n=Number(e[1]),r=o,i=Number(s[1]);t+=` C${o},${n} ${r},${i} ${s[0]},${s[1]}`}return t},B=e=>{const a=new Date(e);return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`},z=e=>{const a=new Date(e);return`${String(a.getHours()).padStart(2,"0")}:${String(a.getMinutes()).padStart(2,"0")}`},Y=(e,a)=>e?e.length>a?`${e.substring(0,a)}...`:e:"",H=({row:e})=>"pending"===e.status?"task-pending":"task-completed";return(0,s.sV)(async()=>{try{await C()}catch(e){k.nk.error("初始化AI设置失败"),console.error("初始化AI设置失败:",e)}try{await _()}catch(e){k.nk.error("初始化回复历史数据失败"),console.error("初始化回复历史数据失败:",e)}try{await X()}catch(e){k.nk.error("初始化AI统计数据失败"),console.error("初始化AI统计数据失败:",e)}}),(e,n)=>{const r=(0,s.g2)("el-switch"),i=(0,s.g2)("el-form-item"),k=(0,s.g2)("el-input-number"),L=(0,s.g2)("el-input"),_=(0,s.g2)("el-button"),C=(0,s.g2)("el-form"),F=(0,s.g2)("el-card"),U=(0,s.g2)("el-option"),P=(0,s.g2)("el-select"),X=(0,s.g2)("el-table-column"),Q=(0,s.g2)("el-table"),J=(0,s.g2)("el-dialog"),Z=(0,s.g2)("el-tooltip"),G=(0,s.g2)("el-tag"),ee=(0,s.g2)("el-pagination"),ae=(0,s.g2)("el-empty"),te=(0,s.gN)("loading");return(0,s.uX)(),(0,s.CE)("div",qe,[(0,s.Lk)("div",Ne,[(0,s.Lk)("div",Be,[(0,s.Lk)("div",ze,[(0,s.bF)(F,{class:"config-card-inner",shadow:"hover"},{header:(0,s.k6)(()=>[...n[14]||(n[14]=[(0,s.Lk)("div",{class:"card-header"},[(0,s.Lk)("div",{class:"header-title"},[(0,s.Lk)("span",null,"AI 自动回复配置")])],-1)])]),default:(0,s.k6)(()=>[(0,s.bF)(C,{ref_key:"aiForm",ref:a,model:l,rules:d,class:"custom-input"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{label:"AI接管状态",prop:"aiStatus"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",Ye,[(0,s.bF)(r,{modelValue:l.aiStatus,"onUpdate:modelValue":n[0]||(n[0]=e=>l.aiStatus=e),"active-color":"#3b82f6","inactive-color":"#d1d5db",onChange:u,loading:o.value},null,8,["modelValue","loading"]),l.aiStatus?((0,s.uX)(),(0,s.CE)("div",He,[n[15]||(n[15]=(0,s.eW)(" 已接管: ",-1)),(0,s.Lk)("span",Qe,(0,p.v_)(c.value),1)])):(0,s.Q3)("",!0)])]),_:1}),(0,s.bF)(i,{label:"回复延迟(秒)",prop:"replyDelay"},{default:(0,s.k6)(()=>[(0,s.bF)(k,{modelValue:l.replyDelay,"onUpdate:modelValue":n[1]||(n[1]=e=>l.replyDelay=e),min:0,max:30,placeholder:"输入回复延迟时间",disabled:o.value},null,8,["modelValue","disabled"])]),_:1}),(0,s.bF)(i,{label:"相同内容最小回复间隔(秒)",prop:"minReplyInterval"},{default:(0,s.k6)(()=>[(0,s.bF)(k,{modelValue:l.minReplyInterval,"onUpdate:modelValue":n[2]||(n[2]=e=>l.minReplyInterval=e),min:0,max:3600,placeholder:"输入相同内容最小回复间隔",disabled:o.value},null,8,["modelValue","disabled"])]),_:1}),(0,s.bF)(i,{label:"接管联系人",prop:"contactPerson"},{default:(0,s.k6)(()=>[(0,s.bF)(L,{modelValue:l.contactPerson,"onUpdate:modelValue":n[3]||(n[3]=e=>l.contactPerson=e),placeholder:"输入接管联系人姓名",disabled:o.value},null,8,["modelValue","disabled"])]),_:1}),(0,s.bF)(i,{label:"AI人设",prop:"aiPersona"},{default:(0,s.k6)(()=>[(0,s.bF)(L,{modelValue:l.aiPersona,"onUpdate:modelValue":n[4]||(n[4]=e=>l.aiPersona=e),type:"textarea",placeholder:"描述AI的性格和回复风格",rows:4,disabled:o.value},null,8,["modelValue","disabled"])]),_:1}),(0,s.Lk)("div",Je,[(0,s.bF)(_,{type:"primary",loading:I.value,onClick:M,class:"gradient-btn",disabled:o.value},{default:(0,s.k6)(()=>[...n[16]||(n[16]=[(0,s.eW)("保存设置",-1)])]),_:1},8,["loading","disabled"]),(0,s.bF)(_,{onClick:K,disabled:o.value},{default:(0,s.k6)(()=>[...n[17]||(n[17]=[(0,s.eW)("重置",-1)])]),_:1},8,["disabled"])])]),_:1},8,["model"])]),_:1})]),(0,s.Lk)("div",Ze,[(0,s.bF)(F,{shadow:"hover"},{header:(0,s.k6)(()=>[...n[18]||(n[18]=[(0,s.Lk)("div",{class:"card-header"},[(0,s.Lk)("div",{class:"header-title"},[(0,s.Lk)("span",null,"AI 性能洞察")])],-1)])]),default:(0,s.k6)(()=>[(0,s.Lk)("div",Ge,[(0,s.Lk)("div",ea,[(0,s.Lk)("div",aa,[(0,s.Lk)("div",ta,(0,p.v_)(S.replyRate)+"%",1),n[19]||(n[19]=(0,s.Lk)("div",{class:"stat-label"},"回复率",-1))]),(0,s.Lk)("div",la,[(0,s.Lk)("div",sa,(0,p.v_)(S.averageTime)+"s",1),n[20]||(n[20]=(0,s.Lk)("div",{class:"stat-label"},"平均响应时间",-1))]),(0,s.Lk)("div",oa,[(0,s.Lk)("div",na,(0,p.v_)(S.satisfactionRate)+"%",1),n[21]||(n[21]=(0,s.Lk)("div",{class:"stat-label"},"满意度",-1))])]),(0,s.Lk)("div",ra,[(0,s.Lk)("div",ia,[(0,s.Lk)("div",ca,[n[22]||(n[22]=(0,s.Lk)("h3",null,"近7天AI回复数量趋势",-1)),(0,s.Lk)("div",ua,[(0,s.bF)(P,{modelValue:$.value,"onUpdate:modelValue":n[5]||(n[5]=e=>$.value=e),placeholder:"选择范围",size:"small",class:"chart-select"},{default:(0,s.k6)(()=>[(0,s.bF)(U,{label:"7天",value:"7d"}),(0,s.bF)(U,{label:"30天",value:"30d"}),(0,s.bF)(U,{label:"90天",value:"90d"})]),_:1},8,["modelValue"])])]),(0,s.Lk)("div",da,[((0,s.uX)(),(0,s.CE)("svg",pa,[n[23]||(n[23]=(0,s.Lk)("defs",null,[(0,s.Lk)("linearGradient",{id:"areaGradient",x1:"0",y1:"0",x2:"0",y2:"1"},[(0,s.Lk)("stop",{offset:"0%","stop-color":"#3b82f6","stop-opacity":"0.4"}),(0,s.Lk)("stop",{offset:"100%","stop-color":"#3b82f6","stop-opacity":"0"})])],-1)),(0,s.Lk)("path",{d:N(W.value.counts),fill:"url(#areaGradient)",stroke:"#3b82f6","stroke-width":"3","stroke-linecap":"round"},null,8,va),n[24]||(n[24]=(0,s.Lk)("path",{d:"M0,150 L400,150",stroke:"#e5e7eb","stroke-width":"1","stroke-dasharray":"4"},null,-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(W.value.counts,(e,a)=>((0,s.uX)(),(0,s.CE)("circle",{key:a,cx:a*(400/(W.value.counts.length-1)),cy:150-e/q.value*100,r:"4",fill:"#ffffff",stroke:"#3b82f6","stroke-width":"2"},null,8,ka))),128)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(W.value.dates,(e,a)=>((0,s.uX)(),(0,s.CE)("text",{key:"label-"+a,x:a*(400/(W.value.dates.length-1)),y:"170","text-anchor":"middle","font-size":"10",fill:"#64748b"},(0,p.v_)(e),9,ma))),128))]))])])])])]),_:1})])]),(0,s.bF)(F,{class:"rules-card",shadow:"hover"},{header:(0,s.k6)(()=>[...n[25]||(n[25]=[(0,s.Lk)("div",{class:"card-header"},[(0,s.Lk)("div",{class:"header-title"},[(0,s.Lk)("span",null,"AI 自定义回复规则")])],-1)])]),default:(0,s.k6)(()=>[(0,s.Lk)("div",ha,[(0,s.Lk)("div",ga,[(0,s.bF)(_,{type:"primary",onClick:b,class:"gradient-btn",disabled:o.value},{default:(0,s.k6)(()=>[...n[26]||(n[26]=[(0,s.eW)("添加规则",-1)])]),_:1},8,["disabled"])]),(0,s.bF)(Q,{data:l.customRules,"onUpdate:data":n[6]||(n[6]=e=>l.customRules=e),class:"rules-table",ref_key:"rulesForm",ref:t,"row-key":"id"},{default:(0,s.k6)(()=>[(0,s.bF)(X,{prop:"matchType",label:"匹配类型",width:"180"},{default:(0,s.k6)(({row:e})=>[(0,s.Lk)("span",null,(0,p.v_)("contains"===e.matchType?"包含关键词":"equals"===e.matchType?"完全匹配":"正则表达式"),1)]),_:1}),(0,s.bF)(X,{prop:"keyword",label:"关键词/规则",width:"240"},{default:(0,s.k6)(({row:e})=>[(0,s.Lk)("span",null,(0,p.v_)(e.keyword),1)]),_:1}),(0,s.bF)(X,{prop:"reply",label:"回复内容"},{default:(0,s.k6)(({row:e})=>[(0,s.Lk)("span",null,(0,p.v_)(e.reply),1)]),_:1}),(0,s.bF)(X,{label:"操作",width:"100",fixed:"right"},{default:(0,s.k6)(({$index:e})=>[(0,s.Lk)("div",fa,[(0,s.bF)(_,{type:"danger",size:"small",onClick:a=>w(e),class:"delete-btn",disabled:o.value},{default:(0,s.k6)(()=>[...n[27]||(n[27]=[(0,s.eW)("删除",-1)])]),_:1},8,["onClick","disabled"])])]),_:1})]),_:1},8,["data"])])]),_:1}),(0,s.bF)(J,{modelValue:m.value,"onUpdate:modelValue":n[11]||(n[11]=e=>m.value=e),title:"添加回复规则",width:"600px","custom-class":"add-rule-dialog"},{footer:(0,s.k6)(()=>[(0,s.Lk)("div",ba,[(0,s.bF)(_,{onClick:n[10]||(n[10]=e=>m.value=!1)},{default:(0,s.k6)(()=>[...n[28]||(n[28]=[(0,s.eW)("取消",-1)])]),_:1}),(0,s.bF)(_,{type:"primary",onClick:y},{default:(0,s.k6)(()=>[...n[29]||(n[29]=[(0,s.eW)("确定",-1)])]),_:1})])]),default:(0,s.k6)(()=>[(0,s.bF)(C,{ref_key:"ruleForm",ref:h,model:g,rules:f,class:"custom-input"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{label:"匹配类型",prop:"matchType"},{default:(0,s.k6)(()=>[(0,s.bF)(P,{modelValue:g.matchType,"onUpdate:modelValue":n[7]||(n[7]=e=>g.matchType=e),placeholder:"选择匹配类型",class:"custom-select"},{default:(0,s.k6)(()=>[(0,s.bF)(U,{label:"包含关键词",value:"contains"}),(0,s.bF)(U,{label:"完全匹配",value:"equals"}),(0,s.bF)(U,{label:"正则表达式",value:"regex"})]),_:1},8,["modelValue"])]),_:1}),(0,s.bF)(i,{label:"关键词/规则",prop:"keyword"},{default:(0,s.k6)(()=>[(0,s.bF)(L,{modelValue:g.keyword,"onUpdate:modelValue":n[8]||(n[8]=e=>g.keyword=e),placeholder:"输入关键词或规则",class:"custom-input"},null,8,["modelValue"])]),_:1}),(0,s.bF)(i,{label:"回复内容",prop:"reply"},{default:(0,s.k6)(()=>[(0,s.bF)(L,{modelValue:g.reply,"onUpdate:modelValue":n[9]||(n[9]=e=>g.reply=e),type:"textarea",placeholder:"输入回复内容（文字，文件路径 或 SendEmotion:2）",rows:4,class:"custom-input"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),(0,s.bF)(F,{class:"history-card",shadow:"hover"},{header:(0,s.k6)(()=>[(0,s.Lk)("div",ya,[n[30]||(n[30]=(0,s.Lk)("div",{class:"header-title"},[(0,s.Lk)("span",null,"AI 回复历史")],-1)),(0,s.Lk)("div",wa,[(0,s.bF)(L,{modelValue:x.value,"onUpdate:modelValue":n[12]||(n[12]=e=>x.value=e),placeholder:"搜索消息内容...","prefix-icon":(0,v.R1)(Ie.vji),size:"small",class:"search-input"},null,8,["modelValue","prefix-icon"])])])]),default:(0,s.k6)(()=>[j.value.length>0?(0,s.bo)(((0,s.uX)(),(0,s.Wv)(Q,{key:0,data:A.value,style:{width:"100%"},class:"custom-table",stripe:"","row-class-name":H,"show-empty":!1},{default:(0,s.k6)(()=>[(0,s.bF)(X,{prop:"time",label:"时间",width:"180",sortable:""},{default:(0,s.k6)(({row:e})=>[(0,s.Lk)("div",La,(0,p.v_)(B(e.time))+" "+(0,p.v_)(z(e.time)),1)]),_:1}),(0,s.bF)(X,{prop:"originalMessage",label:"原始消息",width:"180"},{default:(0,s.k6)(({row:e})=>[(0,s.bF)(Z,{content:e.originalMessage,placement:"top"},{default:(0,s.k6)(()=>[(0,s.Lk)("span",_a,(0,p.v_)(Y(e.originalMessage,20)),1)]),_:2},1032,["content"])]),_:1}),(0,s.bF)(X,{prop:"aiReply",label:"AI 回复"},{default:(0,s.k6)(({row:e})=>[(0,s.bF)(Z,{content:e.aiReply,placement:"top"},{default:(0,s.k6)(()=>[(0,s.Lk)("span",Ca,(0,p.v_)(Y(e.aiReply,30)),1)]),_:2},1032,["content"])]),_:1}),(0,s.bF)(X,{prop:"status",label:"状态",width:"100"},{default:(0,s.k6)(({row:e})=>[(0,s.bF)(G,{type:"replied"===e.status?"success":"warning",size:"small",class:"status-tag"},{default:(0,s.k6)(()=>[(0,s.eW)((0,p.v_)("replied"===e.status?"已回复":"未回复"),1)]),_:2},1032,["type"])]),_:1}),(0,s.bF)(X,{label:"操作",width:"120",fixed:"right"},{default:(0,s.k6)(({row:e})=>[(0,s.Lk)("div",xa,[(0,s.bF)(_,{type:"primary",size:"small",onClick:a=>O(e),icon:(0,v.R1)(Ie.Ss2)},{default:(0,s.k6)(()=>[...n[31]||(n[31]=[(0,s.eW)(" 查看 ",-1)])]),_:1},8,["onClick","icon"])])]),_:1})]),_:1},8,["data"])),[[te,E.value]]):(0,s.Q3)("",!0),j.value.length>0?((0,s.uX)(),(0,s.CE)("div",Fa,[(0,s.bF)(ee,{"current-page":R.value,"onUpdate:currentPage":n[13]||(n[13]=e=>R.value=e),"page-size":T.value,layout:"total, sizes, prev, pager, next, jumper",total:j.value.length,onSizeChange:V,onCurrentChange:D,class:"custom-pagination"},null,8,["current-page","page-size","total"])])):E.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(ae,{key:2,description:"暂无回复历史"}))]),_:1})])])}}};const Ta=(0,r.A)(Ra,[["__scopeId","data-v-b285a21a"]]);var Ea=Ta;const Ia={class:"app-container"},$a={class:"main-content"},Sa={class:"top-row"},ja={class:"otherbox-section"};var Aa={__name:"OtherBoxView",setup(e){const a=async()=>{try{const e=await fetch("http://localhost:5000/api/export/group-members");if(!e.ok)throw new Error("群成员导出功能正在建设中");{const a=await e.blob(),t=window.URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download=`group_members_export_${(new Date).toISOString().slice(0,10)}.xlsx`,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(t),document.body.removeChild(l),k.nk.success("群成员导出成功")}}catch(e){k.nk.error(`${e.message}`)}},t=async()=>{try{const e=await fetch("http://localhost:5000/api/export/group-messages");if(!e.ok)throw new Error("消息记录导出功能正在建设中");{const a=await e.blob(),t=window.URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download=`group_messages_export_${(new Date).toISOString().slice(0,10)}.xlsx`,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(t),document.body.removeChild(l),k.nk.success("消息记录导出成功")}}catch(e){k.nk.error(`${e.message}`)}},l=async()=>{try{const e=await fetch("http://localhost:5000/api/export/group-files");if(!e.ok)throw new Error("文件数据导出功能正在建设中");{const a=await e.blob(),t=window.URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download=`group_files_export_${(new Date).toISOString().slice(0,10)}.xlsx`,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(t),document.body.removeChild(l),k.nk.success("文件数据导出成功")}}catch(e){k.nk.error(`${e.message}`)}},o=async()=>{try{const e=await fetch("http://localhost:5000/api/export/group-images");if(!e.ok)throw new Error("图片数据导出功能正在建设中");{const a=await e.blob(),t=window.URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download=`group_images_export_${(new Date).toISOString().slice(0,10)}.xlsx`,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(t),document.body.removeChild(l),k.nk.success("图片数据导出成功")}}catch(e){k.nk.error(`${e.message}`)}},n=async()=>{try{const e=await fetch("http://localhost:5000/api/export/group-voices");if(!e.ok)throw new Error("语音数据导出功能正在建设中");{const a=await e.blob(),t=window.URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download=`group_voices_export_${(new Date).toISOString().slice(0,10)}.xlsx`,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(t),document.body.removeChild(l),k.nk.success("语音数据导出成功")}}catch(e){k.nk.error(`${e.message}`)}},r=async()=>{try{const e=await fetch("http://localhost:5000/api/export/group-videos");if(!e.ok)throw new Error("视频数据导出功能正在建设中");{const a=await e.blob(),t=window.URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download=`group_videos_export_${(new Date).toISOString().slice(0,10)}.xlsx`,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(t),document.body.removeChild(l),k.nk.success("视频数据导出成功")}}catch(e){k.nk.error(`${e.message}`)}},i=async()=>{try{const e=await fetch("http://localhost:5000/api/export/group-links");if(!e.ok)throw new Error("链接数据导出功能正在建设中");{const a=await e.blob(),t=window.URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download=`group_links_export_${(new Date).toISOString().slice(0,10)}.xlsx`,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(t),document.body.removeChild(l),k.nk.success("链接数据导出成功")}}catch(e){k.nk.error(`${e.message}`)}};return(e,c)=>{const u=(0,s.g2)("el-card");return(0,s.uX)(),(0,s.CE)("div",Ia,[(0,s.Lk)("div",$a,[(0,s.Lk)("div",Sa,[(0,s.Lk)("div",ja,[(0,s.bF)(u,{class:"otherbox-card",shadow:"hover"},{header:(0,s.k6)(()=>[...c[0]||(c[0]=[(0,s.Lk)("div",{class:"card-header"},[(0,s.Lk)("div",{class:"header-title"},[(0,s.Lk)("span",null,"数据导出中心")])],-1)])]),default:(0,s.k6)(()=>[(0,s.Lk)("div",{class:"function-grid"},[(0,s.Lk)("div",{class:"function-card",onClick:a},[...c[1]||(c[1]=[(0,s.Lk)("div",{class:"card-icon"},[(0,s.Lk)("i",{class:"el-icon-user-solid"})],-1),(0,s.Lk)("div",{class:"card-title"},"群成员导出",-1)])]),(0,s.Lk)("div",{class:"function-card",onClick:t},[...c[2]||(c[2]=[(0,s.Lk)("div",{class:"card-icon"},[(0,s.Lk)("i",{class:"el-icon-chat-line-round"})],-1),(0,s.Lk)("div",{class:"card-title"},"消息记录导出",-1)])]),(0,s.Lk)("div",{class:"function-card",onClick:l},[...c[3]||(c[3]=[(0,s.Lk)("div",{class:"card-icon"},[(0,s.Lk)("i",{class:"el-icon-folder"})],-1),(0,s.Lk)("div",{class:"card-title"},"文件数据导出",-1)])]),(0,s.Lk)("div",{class:"function-card",onClick:o},[...c[4]||(c[4]=[(0,s.Lk)("div",{class:"card-icon"},[(0,s.Lk)("i",{class:"el-icon-picture"})],-1),(0,s.Lk)("div",{class:"card-title"},"图片数据导出",-1)])]),(0,s.Lk)("div",{class:"function-card",onClick:n},[...c[5]||(c[5]=[(0,s.Lk)("div",{class:"card-icon"},[(0,s.Lk)("i",{class:"el-icon-mic"})],-1),(0,s.Lk)("div",{class:"card-title"},"语音数据导出",-1)])]),(0,s.Lk)("div",{class:"function-card",onClick:r},[...c[6]||(c[6]=[(0,s.Lk)("div",{class:"card-icon"},[(0,s.Lk)("i",{class:"el-icon-video-camera"})],-1),(0,s.Lk)("div",{class:"card-title"},"视频数据导出",-1)])]),(0,s.Lk)("div",{class:"function-card",onClick:i},[...c[7]||(c[7]=[(0,s.Lk)("div",{class:"card-icon"},[(0,s.Lk)("i",{class:"el-icon-link"})],-1),(0,s.Lk)("div",{class:"card-title"},"链接数据导出",-1)])])])]),_:1})])])])])}}};const Va=(0,r.A)(Aa,[["__scopeId","data-v-567486ec"]]);var Da=Va;const Ma=[{path:"/",component:N,children:[{path:"",name:"home",component:Te},{path:"auto_info",name:"auto_info",component:Xe},{path:"ai_takeover",name:"ai_takeover",component:Ea},{path:"other_box",name:"other_box",component:Da}]}],Ka=(0,d.aE)({history:(0,d.LA)("/"),routes:Ma});Ka.beforeEach((e,a,t)=>{t()});var Oa=Ka,Wa=t(2261),Ua=t(9494);t(4188);const Pa=(0,l.Ef)(u),Xa=(0,Wa.Ey)();Pa.use(Oa),Pa.use(Xa),Pa.use(Ua.A),Pa.mount("#app")},7224:function(e,a,t){e.exports=t.p+"img/why-choose-us.ab2dc343.svg"},8144:function(e,a,t){e.exports=t.p+"img/user-avatar.2fe7a669.svg"},9755:function(e,a,t){e.exports=t.p+"img/get-support.4ea25761.svg"}},a={};function t(l){var s=a[l];if(void 0!==s)return s.exports;var o=a[l]={exports:{}};return e[l].call(o.exports,o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(a,l,s,o){if(!l){var n=1/0;for(u=0;u<e.length;u++){l=e[u][0],s=e[u][1],o=e[u][2];for(var r=!0,i=0;i<l.length;i++)(!1&o||n>=o)&&Object.keys(t.O).every(function(e){return t.O[e](l[i])})?l.splice(i--,1):(r=!1,o<n&&(n=o));if(r){e.splice(u--,1);var c=s();void 0!==c&&(a=c)}}return a}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[l,s,o]}}(),function(){t.d=function(e,a){for(var l in a)t.o(a,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:a[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.p="/"}(),function(){var e={57:0};t.O.j=function(a){return 0===e[a]};var a=function(a,l){var s,o,n=l[0],r=l[1],i=l[2],c=0;if(n.some(function(a){return 0!==e[a]})){for(s in r)t.o(r,s)&&(t.m[s]=r[s]);if(i)var u=i(t)}for(a&&a(l);c<n.length;c++)o=n[c],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(u)},l=self["webpackChunkleafauto_web"]=self["webpackChunkleafauto_web"]||[];l.forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l))}();var l=t.O(void 0,[504],function(){return t(4524)});l=t.O(l)})();
//# sourceMappingURL=index.681a4eb9.js.map